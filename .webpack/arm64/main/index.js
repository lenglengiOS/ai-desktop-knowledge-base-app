(()=>{var e={597:(e,t,r)=>{"use strict";const s=r(157);if("string"==typeof s)throw new TypeError("Not running in an Electron environment!");const o="ELECTRON_IS_DEV"in process.env,n=1===Number.parseInt(process.env.ELECTRON_IS_DEV,10);e.exports=o?n:!s.app.isPackaged},379:(e,t,r)=>{var s=r(928),o=r(317).spawn,n=r(590)("electron-squirrel-startup"),a=r(157).app,i=function(e,t){var r=s.resolve(s.dirname(process.execPath),"..","Update.exe");n("Spawning `%s` with args `%s`",r,e),o(r,e,{detached:!0}).on("close",t)};e.exports=function(){if("win32"===process.platform){var e=process.argv[1];n("processing squirrel command `%s`",e);var t=s.basename(process.execPath);if("--squirrel-install"===e||"--squirrel-updated"===e)return i(["--createShortcut="+t],a.quit),!0;if("--squirrel-uninstall"===e)return i(["--removeShortcut="+t],a.quit),!0;if("--squirrel-obsolete"===e)return a.quit(),!0}return!1}()},918:(e,t,r)=>{function s(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=r(441)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),r){var s="color: "+this.color;e.splice(1,0,s,"color: inherit");var o=0,n=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(n=o))})),e.splice(n,0,s)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=s,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(s())},441:(e,t,r)=>{var s;function o(e){function r(){if(r.enabled){var e=r,o=+new Date,n=o-(s||o);e.diff=n,e.prev=s,e.curr=o,s=o;for(var a=new Array(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(r,s){if("%%"===r)return r;c++;var o=t.formatters[s];if("function"==typeof o){var n=a[c];r=o.call(e,n),a.splice(c,1),c--}return r})),t.formatArgs.call(e,a),(r.log||t.log||console.log.bind(console)).apply(e,a)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,s=0;for(r in e)s=(s<<5)-s+e.charCodeAt(r),s|=0;return t.colors[Math.abs(s)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length,o=0;o<s;o++)r[o]&&("-"===(e=r[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,s;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(464),t.names=[],t.skips=[],t.formatters={}},590:(e,t,r)=>{"undefined"!=typeof process&&"renderer"===process.type?e.exports=r(918):e.exports=r(676)},676:(e,t,r)=>{var s=r(18),o=r(23);(t=e.exports=r(441)).init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function(){return a.write(o.format.apply(o,arguments)+"\n")},t.formatArgs=function(e){var r=this.namespace;if(this.useColors){var s=this.color,o="  [3"+s+";1m"+r+" [0m";e[0]=o+e[0].split("\n").join("\n"+o),e.push("[3"+s+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+r+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=i,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(n)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e}),{});var n=parseInt(process.env.DEBUG_FD,10)||2;1!==n&&2!==n&&o.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var a=1===n?process.stdout:2===n?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new s.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":(t=new(r(896).SyncWriteStream)(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":(t=new(r(278).Socket)({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(n);function i(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)},t.enable(i())},464:e=>{var t=1e3,r=60*t,s=60*r,o=24*s;function n(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,a){a=a||{};var i,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(n){var a=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return a.long?n(i=e,o,"day")||n(i,s,"hour")||n(i,r,"minute")||n(i,t,"second")||i+" ms":function(e){return e>=o?Math.round(e/o)+"d":e>=s?Math.round(e/s)+"h":e>=r?Math.round(e/r)+"m":e>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},328:(e,t,r)=>{"use strict";var s=r(674),o=/(?:(?:[^:]+:)?[/][/])?(?:.+@)?([^/]+)([/][^?#]+)/;e.exports=function(e,t){var r={};if(t=t||{},!e)return null;if(e.url&&(e=e.url),"string"!=typeof e)return null;var n=e.match(/^([\w-_]+)\/([\w-_\.]+)(?:#([\w-_\.]+))?$/),a=e.match(/^github:([\w-_]+)\/([\w-_\.]+)(?:#([\w-_\.]+))?$/),i=e.match(/^git@[\w-_\.]+:([\w-_]+)\/([\w-_\.]+)$/);if(n)r.user=n[1],r.repo=n[2],r.branch=n[3]||"master",r.host="github.com";else if(a)r.user=a[1],r.repo=a[2],r.branch=a[3]||"master",r.host="github.com";else if(i)r.user=i[1],r.repo=i[2].replace(/\.git$/i,""),r.branch="master",r.host="github.com";else{if(e=e.replace(/^git\+/,""),!s(e))return null;var c=e.match(o)||[],u=c[1],p=c[2];if(!u)return null;if("github.com"!==u&&"www.github.com"!==u&&!t.enterprise)return null;var l=p.match(/^\/([\w-_]+)\/([\w-_\.]+)(\/tree\/[\%\w-_\.\/]+)?(\/blob\/[\%\w-_\.\/]+)?/);if(!l)return null;if(r.user=l[1],r.repo=l[2].replace(/\.git$/i,""),r.host=u||"github.com",l[3]&&/^\/tree\/master\//.test(l[3]))r.branch="master",r.path=l[3].replace(/\/$/,"");else if(l[3]){var d=l[3].replace(/^\/tree\//,"").match(/[\%\w-_.]*\/?[\%\w-_]+/);r.branch=d&&d[0]}else l[4]?(d=l[4].replace(/^\/blob\//,"").match(/[\%\w-_.]*\/?[\%\w-_]+/),r.branch=d&&d[0]):r.branch="master"}return"github.com"===r.host?r.apiHost="api.github.com":r.apiHost=r.host+"/api/v3",r.tarball_url="https://"+r.apiHost+"/repos/"+r.user+"/"+r.repo+"/tarball/"+r.branch,r.clone_url="https://"+r.host+"/"+r.user+"/"+r.repo,"master"===r.branch?(r.https_url="https://"+r.host+"/"+r.user+"/"+r.repo,r.travis_url="https://travis-ci.org/"+r.user+"/"+r.repo,r.zip_url="https://"+r.host+"/"+r.user+"/"+r.repo+"/archive/master.zip"):(r.https_url="https://"+r.host+"/"+r.user+"/"+r.repo+"/blob/"+r.branch,r.travis_url="https://travis-ci.org/"+r.user+"/"+r.repo+"?branch="+r.branch,r.zip_url="https://"+r.host+"/"+r.user+"/"+r.repo+"/archive/"+r.branch+".zip"),r.path&&(r.https_url+=r.path),r.api_url="https://"+r.apiHost+"/repos/"+r.user+"/"+r.repo,r}},674:e=>{e.exports=function(e){if("string"!=typeof e)return!1;var o=e.match(t);if(!o)return!1;var n=o[1];return!!n&&!(!r.test(n)&&!s.test(n))};var t=/^(?:\w+:)?\/\/(\S+)$/,r=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,s=/^[^\s\.]+\.\S{2,}$/},402:e=>{var t=1e3,r=60*t,s=60*r,o=24*s,n=7*o;function a(e,t,r,s){var o=t>=1.5*r;return Math.round(e/r)+" "+s+(o?"s":"")}e.exports=function(e,i){i=i||{};var c,u,p=typeof e;if("string"===p&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var i=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return i*n;case"days":case"day":case"d":return i*o;case"hours":case"hour":case"hrs":case"hr":case"h":return i*s;case"minutes":case"minute":case"mins":case"min":case"m":return i*r;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===p&&isFinite(e))return i.long?(c=e,(u=Math.abs(c))>=o?a(c,u,o,"day"):u>=s?a(c,u,s,"hour"):u>=r?a(c,u,r,"minute"):u>=t?a(c,u,t,"second"):c+" ms"):function(e){var n=Math.abs(e);return n>=o?Math.round(e/o)+"d":n>=s?Math.round(e/s)+"h":n>=r?Math.round(e/r)+"m":n>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},807:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateSourceType=void 0,t.updateElectronApp=function(e={}){const t=function(e){var t;const r={host:"https://update.electronjs.org",updateInterval:"10 minutes",logger:console,notifyUser:!0},{host:s,updateInterval:n,logger:i,notifyUser:c,onNotifyUser:u}=Object.assign({},r,e);let p=e.updateSource;switch(p||(p={type:d.ElectronPublicUpdateService,repo:e.repo||w(),host:s}),p.type){case d.ElectronPublicUpdateService:(0,a.default)(null===(t=p.repo)||void 0===t?void 0:t.includes("/"),"repo is required and should be in the format `owner/repo`"),p.host||(p.host=s),(0,a.default)(p.host&&g(p.host),"host must be a valid HTTPS URL");break;case d.StaticStorage:(0,a.default)(p.baseUrl&&g(p.baseUrl),"baseUrl must be a valid HTTPS URL")}return(0,a.default)("string"==typeof n&&n.match(/^\d+/),"updateInterval must be a human-friendly string interval like `20 minutes`"),(0,a.default)((0,o.default)(n)>=3e5,"updateInterval must be `5 minutes` or more"),(0,a.default)(i&&typeof i.log,"function"),{updateSource:p,updateInterval:n,logger:i,notifyUser:c,onNotifyUser:u}}(e);if(l.app.isPackaged)l.app.isReady()?v(t):l.app.on("ready",(()=>v(t)));else{const t="update-electron-app config looks good; aborting updates since app is in development mode";e.logger?e.logger.log(t):console.log(t)}},t.makeUserNotifier=y;const o=s(r(402)),n=s(r(328)),a=s(r(589)),i=s(r(24)),c=s(r(161)),u=s(r(760)),p=r(975),l=r(157);var d;!function(e){e[e.ElectronPublicUpdateService=0]="ElectronPublicUpdateService",e[e.StaticStorage=1]="StaticStorage"}(d||(t.UpdateSourceType=d={}));const f=r(704),h=(0,p.format)("%s/%s (%s: %s)",f.name,f.version,c.default.platform(),c.default.arch()),m=["darwin","win32"],g=e=>{try{const{protocol:t}=new URL(e);return"https:"===t}catch(e){return!1}};function v(e){const{updateSource:t,updateInterval:r,logger:s}=e;if(!m.includes(null===process||void 0===process?void 0:process.platform))return void u(`Electron's autoUpdater does not support the '${process.platform}' platform. Ref: https://www.electronjs.org/docs/latest/api/auto-updater#platform-notices`);let n,i="default";switch(t.type){case d.ElectronPublicUpdateService:n=`${t.host}/${t.repo}/${process.platform}-${process.arch}/${l.app.getVersion()}`;break;case d.StaticStorage:n=t.baseUrl,"darwin"===process.platform&&(n+="/RELEASES.json",i="json")}const c={"User-Agent":h};function u(...e){s.log(...e)}u("feedURL",n),u("requestHeaders",c),l.autoUpdater.setFeedURL({url:n,headers:c,serverType:i}),l.autoUpdater.on("error",(e=>{u("updater error"),u(e)})),l.autoUpdater.on("checking-for-update",(()=>{u("checking-for-update")})),l.autoUpdater.on("update-available",(()=>{u("update-available; downloading...")})),l.autoUpdater.on("update-not-available",(()=>{u("update-not-available")})),e.notifyUser&&l.autoUpdater.on("update-downloaded",((t,r,s,o,n)=>{u("update-downloaded",[t,r,s,o,n]),"function"!=typeof e.onNotifyUser?((0,a.default)(void 0===e.onNotifyUser,"onNotifyUser option must be a callback function or undefined"),u("update-downloaded: notifyUser is true, opening default dialog"),e.onNotifyUser=y()):u("update-downloaded: notifyUser is true, running custom onNotifyUser callback"),e.onNotifyUser({event:t,releaseNotes:r,releaseDate:o,releaseName:s,updateURL:n})})),l.autoUpdater.checkForUpdates(),setInterval((()=>{l.autoUpdater.checkForUpdates()}),(0,o.default)(r))}function y(e){const t=Object.assign({},{title:"Application Update",detail:"A new version has been downloaded. Restart the application to apply the updates.",restartButtonText:"Restart",laterButtonText:"Later"},e);return e=>{const{releaseNotes:r,releaseName:s}=e,{title:o,restartButtonText:n,laterButtonText:a,detail:i}=t,c={type:"info",buttons:[n,a],title:o,message:"win32"===process.platform?r:s,detail:i};l.dialog.showMessageBox(c).then((({response:e})=>{0===e&&l.autoUpdater.quitAndInstall()}))}}function w(){var e;const t=i.default.readFileSync(u.default.join(l.app.getAppPath(),"package.json")),r=JSON.parse(t.toString()),s=(null===(e=r.repository)||void 0===e?void 0:e.url)||r.repository,o=(0,n.default)(s);return(0,a.default)(o,"repo not found. Add repository string to your app's package.json file"),`${o.user}/${o.repo}`}},391:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(o,n){function a(e){try{c(s.next(e))}catch(e){n(e)}}function i(e){try{c(s.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}c((s=s.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(157),a=o(r(597)),i=r(807),c=o(r(379));let u;(0,i.updateElectronApp)({}),c.default&&n.app.quit();const p=()=>{u=new n.BrowserWindow({width:1600,height:900,minWidth:1600,minHeight:900,webPreferences:{preload:require("path").resolve(__dirname,"../renderer","main_window","preload.js"),webSecurity:!1}}),u.loadURL(`file://${require("path").resolve(__dirname,"..","renderer","main_window","index.html")}`),a.default&&u.webContents.openDevTools(),u.webContents.session.webRequest.onHeadersReceived(((e,t)=>{t({responseHeaders:Object.assign(Object.assign({},e.responseHeaders),{"Content-Security-Policy":["connect-src 'self' https://api.moonshot.cn/v1/chat/completions"]})})}))};n.app.on("ready",p),n.app.on("window-all-closed",(()=>{"darwin"!==process.platform&&n.app.quit()})),n.app.on("activate",(()=>{0===n.BrowserWindow.getAllWindows().length&&p()})),n.ipcMain.on("minimize",(e=>{u.minimize()})),n.ipcMain.on("maximize",(e=>{u.maximize()})),n.ipcMain.handle("choose-file",((e,t)=>s(void 0,void 0,void 0,(function*(){return yield n.dialog.showOpenDialog(n.BrowserWindow.getFocusedWindow(),{properties:["openFile"]})}))))},317:e=>{"use strict";e.exports=require("child_process")},157:e=>{"use strict";e.exports=require("electron")},896:e=>{"use strict";e.exports=require("fs")},278:e=>{"use strict";e.exports=require("net")},589:e=>{"use strict";e.exports=require("node:assert")},24:e=>{"use strict";e.exports=require("node:fs")},161:e=>{"use strict";e.exports=require("node:os")},760:e=>{"use strict";e.exports=require("node:path")},975:e=>{"use strict";e.exports=require("node:util")},928:e=>{"use strict";e.exports=require("path")},18:e=>{"use strict";e.exports=require("tty")},23:e=>{"use strict";e.exports=require("util")},704:e=>{"use strict";e.exports=JSON.parse('{"name":"update-electron-app","version":"3.1.1","description":"A drop-in module that adds autoUpdating capabilities to Electron apps","repository":"https://github.com/electron/update-electron-app","main":"dist/index.js","types":"dist/index.d.ts","license":"MIT","publishConfig":{"provenance":true},"dependencies":{"github-url-to-object":"^4.0.4","ms":"^2.1.1"},"devDependencies":{"@eslint/js":"^9.15.0","@types/github-url-to-object":"^4.0.1","@types/jest":"^29.5.14","@types/ms":"^0.7.31","@types/node":"^22.10.1","electron":"^33.2.1","eslint":"^9.15.0","eslint-config-prettier":"^9.1.0","globals":"^15.13.0","husky":"^9.1.7","jest":"^29.0.0","lint-staged":"^15.2.10","prettier":"^3.0.3","ts-jest":"^29.2.5","typescript":"^5.7.2","typescript-eslint":"^8.16.0"},"scripts":{"lint":"npx eslint src test && npx prettier \'**/*.{ts,js,mts,mjs,cjs,cts}\' --check","prepare":"tsc && husky","test":"jest","watch":"jest --watch --notify --notifyMode=change --coverage"},"lint-staged":{"*.{js,ts,cjs,cts,mjs,mts}":["eslint --cache --fix","prettier --write"]}}')}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,r),n.exports}void 0!==r&&(r.ab=__dirname+"/native_modules/");var s=r(391);module.exports=s})();
//# sourceMappingURL=index.js.map